<!DOCTYPE html>
<!--AUTOGENERATED FILE - DO NOT EDIT - SEE Makefile-->
<html><head><meta charset="UTF-8"/><title>WebGL WEBGL_debug Extension Proposed Specification</title><link rel="alternate" type="text/xml" href="extension.xml"/><link rel="stylesheet" type="text/css" href="../../../resources/Khronos-Proposal.css"/></head><body><!--begin-logo--><div class="left"><a href="http://webgl.org/"><img alt="WebGL" height="100" src="../../../resources/WebGL-Logo.png" width="240"/></a></div><div class="right"><a href="http://khronos.org/"><img alt="Khronos" height="60" src="../../../resources/KhronosGroup-3D.png" width="220"/></a></div><div style="clear: both;"> </div><br/><!--end-logo--><h1>WebGL WEBGL_debug Extension Proposed Specification</h1><p><strong>DO NOT IMPLEMENT!!!</strong></p><h2 class="no-toc">Name</h2><p>WEBGL_debug</p><h2 class="no-toc">Contact</h2><p> <a href="https://www.khronos.org/webgl/public-mailing-list/">WebGL
  working group</a> (public_webgl 'at' khronos.org) </p><h2 class="no-toc">Contributors</h2><p>Emmanuel Gil Peyrot, Collabora Ltd.</p><p>Members of the WebGL working group</p><h2 class="no-toc">Version</h2><p> Last modified date: September 18, 2015<br/>
          Revision: 1</p><h2 class="no-toc">Number</h2><p> WebGL extension #NN</p><h2 class="no-toc">Dependencies</h2>
    <p> Written against the <a href="http://www.khronos.org/registry/webgl/specs/1.0/">WebGL API 1.0</a> specification. </p>
  <h2 class="no-toc">Overview</h2>
    <p>
      This extension allows the GL to notify applications when various events
      occur that may be useful during application development, debugging and
      profiling.
    </p>

    <p> This extension exposes the
  <a href="https://www.opengl.org/registry/specs/KHR/debug.txt">KHR_debug</a> functionality to WebGL.
  </p><p>The following WebGL-specific behavioral changes apply:</p><ul><li>
        References to debug contexts are deleted.
      </li><li>
        References to the debug message log and callback are deleted, replaced
        with DOM events.
      </li><li>
        The <code>ObjectPtrLabel</code> and <code>GetObjectPtrLabel</code>
        functions are replaced with <code>ObjectLabel</code> and
        <code>GetObjectLabel</code>.
      </li><li>
        The <code>count</code> and <code>ids</code> arguments of
        <code>DebugMessageControl</code> are replaced with a
        <code>sequence&lt;GLuint&gt; ids</code> argument.
      </li><li>
        The <code>length</code> and <code>buf</code> arguments of
        <code>DebugMessageInsert</code> and <code>PushDebugGroup</code> are
        replaced with a <code>DOMString message</code> argument.
      </li><li>
        The <code>identifier</code> and <code>name</code> arguments of
        <code>ObjectLabel</code> and <code>GetObjectLabel</code> are replaced
        with a <code>WebGLObject object</code> argument.
      </li><li>
        The <code>length</code> and <code>label</code> arguments of
        <code>ObjectLabel</code> are replaced with a <code>DOMString
        label</code> argument.
      </li><li>
        The <code>bufSize</code>, <code>length</code> and <code>label</code>
        arguments of <code>GetObjectLabel</code> are replaced with a
        <code>DOMString</code> return type.
      </li><li>
        As per the usual WebGL binding rules, functions don’t keep the KHR
        suffix they have in the GLES version, but tokens do.
      </li></ul><p>
        Consult the above extension for documentation, issues and new functions and enumerants.
      </p>

    <p> When this extension is enabled: </p><ul><li>
        The <code>WEBGL_debug</code> extension object is a DOM
        <code>EventTarget</code>, obeying the rules of the <a href="http://www.w3.org/TR/DOM-Level-3-Events/">DOM Level 3 Events</a>,
        with a new <code>WebGLDebugMessage</code> event that gets fired
        whenever the driver, browser or application emits a debug message.
      </li><li>
        <code>debugMessageInsertKHR</code> is exposed to allow the application
        to insert debug messages into the WebGL stream.
      </li><li>
        <code>objectLabelKHR</code> and <code>getObjectLabelKHR</code> are
        exposed, to assign a label to a <code>WebGLObject</code> and retrieve
        it.
      </li><li>
        <code>pushDebugGroupKHR</code> and <code>popDebugGroupKHR</code> make
        it possible to group a list of WebGL calls together.
      </li><li>
        <code>debugMessageControlKHR</code> allows the application to enable
        and disable the debug messages which emit a
        <code>WebGLDebugMessage</code> event.  This state is part of the debug
        group they are part of, and gets poped on
        <code>popDebugGroupKHR</code>.
      </li></ul>
  <h2 class="no-toc">IDL</h2><pre class="idl">
[NoInterfaceObject]
interface WEBGL_debug : EventTarget {
  const GLenum MAX_DEBUG_MESSAGE_LENGTH_KHR = 0x9143;
  const GLenum MAX_DEBUG_GROUP_STACK_DEPTH_KHR = 0x826C;
  const GLenum DEBUG_GROUP_STACK_DEPTH_KHR = 0x826D;
  const GLenum MAX_LABEL_LENGTH_KHR = 0x82E8;

  const GLenum DEBUG_SOURCE_API_KHR = 0x8246;
  const GLenum DEBUG_SOURCE_WINDOW_SYSTEM_KHR = 0x8247;
  const GLenum DEBUG_SOURCE_SHADER_COMPILER_KHR = 0x8248;
  const GLenum DEBUG_SOURCE_THIRD_PARTY_KHR = 0x8249;
  const GLenum DEBUG_SOURCE_APPLICATION_KHR = 0x824A;
  const GLenum DEBUG_SOURCE_OTHER_KHR = 0x824B;

  const GLenum DEBUG_TYPE_ERROR_KHR = 0x824C;
  const GLenum DEBUG_TYPE_DEPRECATED_BEHAVIOR_KHR = 0x824D;
  const GLenum DEBUG_TYPE_UNDEFINED_BEHAVIOR_KHR = 0x824E;
  const GLenum DEBUG_TYPE_PORTABILITY_KHR = 0x824F;
  const GLenum DEBUG_TYPE_PERFORMANCE_KHR = 0x8250;
  const GLenum DEBUG_TYPE_OTHER_KHR = 0x8251;
  const GLenum DEBUG_TYPE_MARKER_KHR = 0x8268;

  const GLenum DEBUG_TYPE_PUSH_GROUP_KHR = 0x8269;
  const GLenum DEBUG_TYPE_POP_GROUP_KHR = 0x826A;

  const GLenum DEBUG_SEVERITY_HIGH_KHR = 0x9146;
  const GLenum DEBUG_SEVERITY_MEDIUM_KHR = 0x9147;
  const GLenum DEBUG_SEVERITY_LOW_KHR = 0x9148;
  const GLenum DEBUG_SEVERITY_NOTIFICATION_KHR = 0x826B;

  const GLenum STACK_UNDERFLOW_KHR = 0x0504;
  const GLenum STACK_OVERFLOW_KHR = 0x0503;

  void debugMessageControlKHR(GLenum source, GLenum type, GLenum severity, sequence&lt;GLuint&gt; ids, boolean enabled);
  void debugMessageInsertKHR(GLenum source, GLenum type, GLuint id, GLenum severity, DOMString buf);

  void pushDebugGroupKHR(GLenum source, GLuint id, DOMString message);
  void popDebugGroupKHR();

  void objectLabelKHR(WebGLObject? object, DOMString label);
  DOMString getObjectLabelKHR(WebGLObject? object);
}; // interface WEBGL_debug

[NoInterfaceObject]
interface WebGLDebugMessage : Event {
  readonly attribute GLenum source;
  readonly attribute GLenum type;
  readonly attribute GLuint id;
  readonly attribute GLenum severity;
  readonly attribute DOMString message;
}; // interface WebGLDebugMessage
  </pre><h2 class="no-toc">New Functions</h2><p>On <code>WEBGL_debug</code>:</p><dl class="methods"><dt class="idl-code">void debugMessageControlKHR(GLenum source, GLenum type, GLenum severity, sequence&lt;GLuint&gt; ids, boolean enabled)</dt><dd>
      
      
      
      
      
      Enables or disables the reporting of <code>WebGLDebugMessage</code>
      events for the specified messages.
    </dd><dt class="idl-code">void debugMessageInsertKHR(GLenum source, GLenum type, GLuint id, GLenum severity, DOMString message)</dt><dd>
      
      
      
      
      
      Inserts a custom message into the debug log.
    </dd><dt class="idl-code">void pushDebugGroupKHR(GLenum source, GLuint id, DOMString message)</dt><dd>
      
      
      
      Pushes a debug group on the stack.
    </dd><dt class="idl-code">void popDebugGroupKHR()</dt><dd>
      Closes a group opened with <code>pushDebugGroupKHR</code>.
    </dd><dt class="idl-code">void objectLabelKHR(WebGLObject? object, DOMString label)</dt><dd>
      
      
      Assigns a label to a <code>WebGLObject</code>.
    </dd><dt class="idl-code">DOMString getObjectLabelKHR(WebGLObject? object)</dt><dd>
      
      Retrieves the label associated with a <code>WebGLObject</code>.
    </dd><dt class="idl-code">void addEventListener(DOMString type, EventListener listener)</dt><dd>
      
      
      Register an event handler of a specific event type on the EventTarget.
    </dd><dt class="idl-code">void removeEventListener(DOMString type, EventListener listener)</dt><dd>
      
      
      Removes an event listener from the EventTarget.
    </dd><dt class="idl-code">boolean dispatchEvent(Event event)</dt><dd>
      
      Dispatch an event to this EventTarget.
    </dd></dl><h2 class="no-toc">Sample Code</h2><div class="example">
    Common initialization of the extension, with an example of debug message
    reporting.

    <pre xml:space="preserve">
function init(gl) {
  ...
  var ext = gl.getExtension('WEBGL_debug');

  ext.addEventListener('message', function(evt) {
    console.log(evt.source, evt.type, evt.id, evt.severity, evt.message);
  });
  ...
}</pre></div><div class="example">
    Skip a section of the code.
    
    <pre xml:space="preserve">
function draw(gl, ext) {
  ...

  // Setup of the default active debug group: Filter everything in
  ext.debugMessageControlKHR(gl.DONT_CARE, gl.DONT_CARE, gl.DONT_CARE, [], true);

  // Generate a debug marker debug output message
  ext.debugMessageInsertKHR(
    ext.DEBUG_SOURCE_APPLICATION_KHR,
    ext.DEBUG_TYPE_MARKER_KHR, 100,
    ext.DEBUG_SEVERITY_NOTIFICATION_KHR,
    "Message 1");

  // Push debug group 1
  ext.pushDebugGroupKHR(
    ext.DEBUG_SOURCE_APPLICATION_KHR,
    1,
    "Message 2");

  // Setup of the debug group 1: Filter everything out
  ext.debugMessageControlKHR(gl.DONT_CARE, gl.DONT_CARE, gl.DONT_CARE, [], false);

  // This message won't appear in the debug output log of
  ext.debugMessageInsertKHR(
    ext.DEBUG_SOURCE_APPLICATION_KHR,
    ext.DEBUG_TYPE_MARKER_KHR, 100,
    ext.DEBUG_SEVERITY_NOTIFICATION_KHR,
    "Message 3");

  // Pop debug group 1, restore the volume control of the default debug group.
  ext.popDebugGroupKHR();

  // Generate a debug marker debug output message
  ext.debugMessageInsertKHR(
    ext.DEBUG_SOURCE_APPLICATION_KHR,
    ext.DEBUG_TYPE_MARKER_KHR, 100,
    ext.DEBUG_SEVERITY_NOTIFICATION_KHR,
    "Message 5");

  ...

  // Expected debug output in the JS console:
  // Message 1
  // Message 2
  // Message 2
  // Message 5
}</pre></div><div class="example">
    Only output a subsection of the code and disable some messages for the
    entire application.
  
    <pre xml:space="preserve">
function draw(gl, ext) {
  ...

  // Setup the control of the debug output for the default debug group
  ext.debugMessageControlKHR(
    gl.DONT_CARE, gl.DONT_CARE, gl.DONT_CARE, [], false);
  ext.debugMessageControlKHR(
    ext.DEBUG_SOURCE_THIRD_PARTY_KHR, gl.DONT_CARE, gl.DONT_CARE, [], false);
  var messages = [1234, 2345, 3456, 4567];
  ext.debugMessageControlKHR(
    ext.DEBUG_SOURCE_APPLICATION_KHR, gl.DEBUG_TYPE_OTHER, gl.DONT_CARE,
    messages, false);
  ext.debugMessageControlKHR(
    ext.DEBUG_SOURCE_APPLICATION_KHR, ext.DEBUG_TYPE_PORTABILITY_KHR, gl.DONT_CARE,
    messages, false);

  // Push debug group 1
  // Inherit the default debug group debug output volume control
  // Filtered out by ext.debugMessageControlKHR
  ext.pushDebugGroupKHR(
    ext.DEBUG_SOURCE_APPLICATION_KHR,
    1,
    "Message 1");

  // In this section of the code, we are interested in performances.
  ext.debugMessageControlKHR(
    ext.DEBUG_SOURCE_APPLICATION_KHR, ext.DEBUG_TYPE_PERFORMANCE_KHR, gl.DONT_CARE, [], true);
  // But we already identify that some messages are not really useful for us.
  ext.debugMessageControlKHR(
    ext.DEBUG_SOURCE_APPLICATION_KHR, ext.DEBUG_TYPE_OTHER_KHR, gl.DONT_CARE,
    [5678, 6789], false);

  ext.debugMessageInsertKHR(
    ext.DEBUG_SOURCE_APPLICATION_KHR,
    ext.DEBUG_TYPE_PERFORMANCE_KHR, 1357,
    ext.DEBUG_SEVERITY_MEDIUM_KHR,
    "Message 2");
  ext.debugMessageInsertKHR(
    ext.DEBUG_SOURCE_THIRD_PARTY_KHR, // We still filter out these messages.
    ext.DEBUG_TYPE_OTHER_KHR, 3579,
    ext.DEBUG_SEVERITY_MEDIUM_KHR,
    "Message 3");

  ext.popDebugGroupKHR();

  ...

  // Expected debug output in the JS console:
  // Message 2
}</pre></div><h2 class="no-toc">Revision History</h2><p>Revision 1, 2015/09/18</p><ul><li>Initial revision.</li></ul></body></html>
