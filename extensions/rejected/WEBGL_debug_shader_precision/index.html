<!DOCTYPE html>
<!--AUTOGENERATED FILE - DO NOT EDIT - SEE Makefile-->
<html><head><meta charset="UTF-8"/><title>WebGL WEBGL_debug_shader_precision Extension Rejected Specification</title><link rel="alternate" type="text/xml" href="extension.xml"/><link rel="stylesheet" type="text/css" href="../../../resources/Khronos-Rejected.css"/></head><body><!--begin-logo--><div class="left"><a href="http://webgl.org/"><img alt="WebGL" height="100" src="../../../resources/WebGL-Logo.png" width="240"/></a></div><div class="right"><a href="http://khronos.org/"><img alt="Khronos" height="60" src="../../../resources/KhronosGroup-3D.png" width="220"/></a></div><div style="clear: both;">Â </div><br/><!--end-logo--><h1>WebGL WEBGL_debug_shader_precision Extension Rejected Specification</h1><h2 class="no-toc">Name</h2><p>WEBGL_debug_shader_precision</p><h2 class="no-toc">Contact</h2><p><a href="https://www.khronos.org/webgl/public-mailing-list/">WebGL
  working group</a> (public_webgl 'at' khronos.org) </p><h2 class="no-toc">Contributors</h2><p>Olli Etuaho, NVIDIA</p><p>Members of the WebGL working group</p><h2 class="no-toc">Version</h2><p> Last modified date: January 24, 2015<br/>
          Revision: 4</p><h2 class="no-toc">Number</h2><p> WebGL extension #NN</p><h2 class="no-toc">Dependencies</h2>
    <p> Written against the <a href="http://www.khronos.org/registry/webgl/specs/1.0/">WebGL API 1.0</a> specification. </p>
  <h2 class="no-toc">Overview</h2>
    <p>
      This extension enables software emulation of mediump and lowp floating point arithmetic in GLSL shaders for the purposes of shader testing. The emulation is enabled for shaders that are compiled after the extension has been enabled. Shaders compiled before the extension is enabled are not subject to emulation. The emulation does not model any specific device, but hypothetical shader units that implement IEEE half-precision floating point and the minimum requirements for lowp in The OpenGL ES Shading Language specification version 1.00.17. It is suggested that the software emulation is implemented in shader code, but a large performance cost on the order of one magnitude is still expected on all operations subject to emulation.
    </p>
    <div class="note">
      Many varieties of PC GPUs only implement one precision for floating point operations that corresponds to highp in The OpenGL ES Shading Language, so errors in shader code which uses mediump or lowp precision may be undetectable on these GPUs. Testing shaders with this extension enabled is recommended to ensure compatibility with a wide variety of hardware. Due to the large performance cost of emulation, this extension should only be used for testing and not in a production environment.
    </div>
    <p>
      The emulation applies to:
    </p>
    <ul>
        <li>accesses to variables in r-value expressions (not on the left side of an assignment operator, includes passing in parameters to a function)</li>
        <li>return values of built-in functions</li>
        <li>return values of binary math operators, including assignment and compound assignment</li>
        <li>results of binary math operations evaluated as a part of compound assignment</li>
    </ul>
    <div class="note">
        <p>
            Examples of operations not subject to emulation:
        </p>
        <ul>
            <li>The math operator is unary, so storing the result and the return value are not subject to emulation: my_float++;</li>
        </ul>
    </div>
    <p> When this extension is enabled: </p><ul><li>
        <p>
          Operations listed above resulting in a mediump precision floating point scalar, vector or matrix must perform the following steps on the resulting scalar value or each of the components of the vector or matrix:
        </p>
        <ol>
          <li>Clamp the value to the range [-65504.0, 65504.0].</li>
          <li>Determine the floating-point exponent <em>e</em> of the clamped value.</li>
          <li>If <em>e</em> &lt; -15, return 0.0, skipping steps 4-6. The sign bit of the return value is undefined in this case.</li>
          <li>Let <em>x</em> be the clamped value multiplied by 2^(-<em>e</em> + 10.0).</li>
          <li>Let <em>y</em> be sign(<em>x</em>) * floor(abs(<em>x</em>)).</li>
          <li>Return <em>y</em> * 2^(<em>e</em> - 10.0).</li>
        </ol>
      </li><li>
        <p>
          Operations listed above resulting in a lowp precision floating point scalar, vector or matrix must perform the following steps on the resulting scalar value or each of the components of the vector or matrix:
        </p>
        <ol>
          <li>Clamp the value to the range [-2.0, 2.0].</li>
          <li>Let <em>x</em> be the clamped value multiplied by 2^8.</li>
          <li>Let <em>y</em> be sign(<em>x</em>) * floor(abs(<em>x</em>)).</li>
          <li>Return <em>y</em> * 2^(-8).</li>
        </ol>
      </li><li>
        <p>
          sign, floor, and abs in the above steps refer to built-in functions in The OpenGL ES Shading Language.
        </p>
        <p>
          The handling of positive and negative infinity and NaN by the above steps is undefined.
        </p>
      </li><li>
        <p>
          The <code>#pragma webgl_debug_shader_precision</code> directive is accepted by the shader compiler, and can be used to disable the emulation for specific shaders. By default, emulation is enabled by all shaders, but including <code>#pragma webgl_debug_shader_precision(off)</code> in a shader must disable emulation for that shader.
        </p>
      </li></ul>
    <p>
      Due to hardware limitations, it is allowed that some shaders which compile and link successfully when the extension is disabled do not compile or link when the extension is enabled.
    </p>
  <h2 class="no-toc">IDL</h2><pre class="idl">
[NoInterfaceObject]
interface WEBGL_debug_shader_precision {
};
  </pre><h2 class="no-toc">Revision History</h2><p>Revision 1, 2014/11/05</p><ul><li>Initial revision.</li></ul><p>Revision 2, 2014/11/10</p><ul><li>Added a #pragma directive to use in shaders and did minor clarifications.</li></ul><p>Revision 3, 2014/11/12</p><ul><li>Lifted restrictions concerning math operations evaluated as a part of compound assignment.</li></ul><p>Revision 4, 2015/01/24</p><ul><li>Moved to rejected on grounds of it being easy to provide as a library (with emscripten).</li></ul></body></html>
